<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="1,52" id="srcline52">52</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,53" id="srcline53">53</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,54" id="srcline54">54</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S34T6U692">ab</span> = quaternProd(<span class="var type1" id="S35T4U695">a</span>, <span class="var type1" id="S36T4U696">b</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="1,55" id="srcline55">55</a></span><span class="line">    <span class="mxinfo " id="T6:U4"><span class="var type1" id="S34T6U699">ab</span>=<span class="mxinfo " id="T6:U6">zeros(<span class="mxinfo " id="T7:U7">1</span>,<span class="mxinfo " id="T7:U8">4</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,56" id="srcline56">56</a></span><span class="line"><span class="comment">%QUATERNPROD Calculates the quaternion product</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,57" id="srcline57">57</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,58" id="srcline58">58</a></span><span class="line"><span class="comment">%   ab = quaternProd(a, b)</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,59" id="srcline59">59</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,60" id="srcline60">60</a></span><span class="line"><span class="comment">%   Calculates the quaternion product of quaternion a and b.</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,61" id="srcline61">61</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,62" id="srcline62">62</a></span><span class="line"><span class="comment">%   For more information see:</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,63" id="srcline63">63</a></span><span class="line"><span class="comment">%   http://www.x-io.co.uk/node/8#quaternions</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,64" id="srcline64">64</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,65" id="srcline65">65</a></span><span class="line"><span class="comment">%   Date          Author          Notes</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,66" id="srcline66">66</a></span><span class="line"><span class="comment">%   27/09/2011    SOH Madgwick    Initial release</span></span></span>
<span class="srcline"><span class="lineno"><a href="1,67" id="srcline67">67</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="1,68" id="srcline68">68</a></span><span class="line">    <span class="mxinfo " id="T7:U9"><span class="mxinfo " id="T7:U10"><span class="var type1" id="S34T6U707">ab</span>(<span class="mxinfo " id="T7:U12">1</span>)</span> = <span class="mxinfo " id="T3:U13"><span class="mxinfo " id="T3:U14"><span class="mxinfo " id="T3:U15"><span class="mxinfo " id="T3:U16"><span class="mxinfo " id="T3:U17"><span class="var type1" id="S35T4U714">a</span>(<span class="mxinfo " id="T7:U19">1</span>)</span>.*<span class="mxinfo " id="T3:U20"><span class="var type1" id="S36T4U717">b</span>(<span class="mxinfo " id="T7:U22">1</span>)</span></span>-<span class="mxinfo " id="T3:U23"><span class="mxinfo " id="T3:U24"><span class="var type1" id="S35T4U721">a</span>(<span class="mxinfo " id="T7:U26">2</span>)</span>.*<span class="mxinfo " id="T3:U27"><span class="var type1" id="S36T4U724">b</span>(<span class="mxinfo " id="T7:U29">2</span>)</span></span></span>-<span class="mxinfo " id="T3:U30"><span class="mxinfo " id="T3:U31"><span class="var type1" id="S35T4U728">a</span>(<span class="mxinfo " id="T7:U33">3</span>)</span>.*<span class="mxinfo " id="T3:U34"><span class="var type1" id="S36T4U731">b</span>(<span class="mxinfo " id="T7:U36">3</span>)</span></span></span>-<span class="mxinfo " id="T3:U37"><span class="mxinfo " id="T3:U38"><span class="var type1" id="S35T4U735">a</span>(<span class="mxinfo " id="T7:U40">4</span>)</span>.*<span class="mxinfo " id="T3:U41"><span class="var type1" id="S36T4U738">b</span>(<span class="mxinfo " id="T7:U43">4</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,69" id="srcline69">69</a></span><span class="line">    <span class="mxinfo " id="T7:U44"><span class="mxinfo " id="T7:U45"><span class="var type1" id="S34T6U743">ab</span>(<span class="mxinfo " id="T7:U47">2</span>)</span> = <span class="mxinfo " id="T3:U48"><span class="mxinfo " id="T3:U49"><span class="mxinfo " id="T3:U50"><span class="mxinfo " id="T3:U51"><span class="mxinfo " id="T3:U52"><span class="var type1" id="S35T4U750">a</span>(<span class="mxinfo " id="T7:U54">1</span>)</span>.*<span class="mxinfo " id="T3:U55"><span class="var type1" id="S36T4U753">b</span>(<span class="mxinfo " id="T7:U57">2</span>)</span></span>+<span class="mxinfo " id="T3:U58"><span class="mxinfo " id="T3:U59"><span class="var type1" id="S35T4U757">a</span>(<span class="mxinfo " id="T7:U61">2</span>)</span>.*<span class="mxinfo " id="T3:U62"><span class="var type1" id="S36T4U760">b</span>(<span class="mxinfo " id="T7:U64">1</span>)</span></span></span>+<span class="mxinfo " id="T3:U65"><span class="mxinfo " id="T3:U66"><span class="var type1" id="S35T4U764">a</span>(<span class="mxinfo " id="T7:U68">3</span>)</span>.*<span class="mxinfo " id="T3:U69"><span class="var type1" id="S36T4U767">b</span>(<span class="mxinfo " id="T7:U71">4</span>)</span></span></span>-<span class="mxinfo " id="T3:U72"><span class="mxinfo " id="T3:U73"><span class="var type1" id="S35T4U771">a</span>(<span class="mxinfo " id="T7:U75">4</span>)</span>.*<span class="mxinfo " id="T3:U76"><span class="var type1" id="S36T4U774">b</span>(<span class="mxinfo " id="T7:U78">3</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,70" id="srcline70">70</a></span><span class="line">    <span class="mxinfo " id="T7:U79"><span class="mxinfo " id="T7:U80"><span class="var type1" id="S34T6U779">ab</span>(<span class="mxinfo " id="T7:U82">3</span>)</span> = <span class="mxinfo " id="T3:U83"><span class="mxinfo " id="T3:U84"><span class="mxinfo " id="T3:U85"><span class="mxinfo " id="T3:U86"><span class="mxinfo " id="T3:U87"><span class="var type1" id="S35T4U786">a</span>(<span class="mxinfo " id="T7:U89">1</span>)</span>.*<span class="mxinfo " id="T3:U90"><span class="var type1" id="S36T4U789">b</span>(<span class="mxinfo " id="T7:U92">3</span>)</span></span>-<span class="mxinfo " id="T3:U93"><span class="mxinfo " id="T3:U94"><span class="var type1" id="S35T4U793">a</span>(<span class="mxinfo " id="T7:U96">2</span>)</span>.*<span class="mxinfo " id="T3:U97"><span class="var type1" id="S36T4U796">b</span>(<span class="mxinfo " id="T7:U99">4</span>)</span></span></span>+<span class="mxinfo " id="T3:U100"><span class="mxinfo " id="T3:U101"><span class="var type1" id="S35T4U800">a</span>(<span class="mxinfo " id="T7:U103">3</span>)</span>.*<span class="mxinfo " id="T3:U104"><span class="var type1" id="S36T4U803">b</span>(<span class="mxinfo " id="T7:U106">1</span>)</span></span></span>+<span class="mxinfo " id="T3:U107"><span class="mxinfo " id="T3:U108"><span class="var type1" id="S35T4U807">a</span>(<span class="mxinfo " id="T7:U110">4</span>)</span>.*<span class="mxinfo " id="T3:U111"><span class="var type1" id="S36T4U810">b</span>(<span class="mxinfo " id="T7:U113">2</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,71" id="srcline71">71</a></span><span class="line">    <span class="mxinfo " id="T7:U114"><span class="mxinfo " id="T7:U115"><span class="var type1" id="S34T6U815">ab</span>(<span class="mxinfo " id="T7:U117">4</span>)</span> = <span class="mxinfo " id="T3:U118"><span class="mxinfo " id="T3:U119"><span class="mxinfo " id="T3:U120"><span class="mxinfo " id="T3:U121"><span class="mxinfo " id="T3:U122"><span class="var type1" id="S35T4U822">a</span>(<span class="mxinfo " id="T7:U124">1</span>)</span>.*<span class="mxinfo " id="T3:U125"><span class="var type1" id="S36T4U825">b</span>(<span class="mxinfo " id="T7:U127">4</span>)</span></span>+<span class="mxinfo " id="T3:U128"><span class="mxinfo " id="T3:U129"><span class="var type1" id="S35T4U829">a</span>(<span class="mxinfo " id="T7:U131">2</span>)</span>.*<span class="mxinfo " id="T3:U132"><span class="var type1" id="S36T4U832">b</span>(<span class="mxinfo " id="T7:U134">3</span>)</span></span></span>-<span class="mxinfo " id="T3:U135"><span class="mxinfo " id="T3:U136"><span class="var type1" id="S35T4U836">a</span>(<span class="mxinfo " id="T7:U138">3</span>)</span>.*<span class="mxinfo " id="T3:U139"><span class="var type1" id="S36T4U839">b</span>(<span class="mxinfo " id="T7:U141">2</span>)</span></span></span>+<span class="mxinfo " id="T3:U142"><span class="mxinfo " id="T3:U143"><span class="var type1" id="S35T4U843">a</span>(<span class="mxinfo " id="T7:U145">4</span>)</span>.*<span class="mxinfo " id="T3:U146"><span class="var type1" id="S36T4U846">b</span>(<span class="mxinfo " id="T7:U148">1</span>)</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="1,72" id="srcline72">72</a></span><span class="line"></span></span>
</pre>
